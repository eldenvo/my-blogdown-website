---
title: A Not That Great Attempt at Simulating the World Cup Draw
author: Alex
date: '2017-11-29'
slug: a-not-that-great-attempt-at-simulating-the-world-cup-draw
categories:
  - football
  - simulations
tags:
  - rstats
  - ggplot
  - tidyverse
  - football
---

On Friday, famous crisp addict Gary Lineker will host the [FIFA World Cup 2018 draw](http://www.fifa.com/worldcup/news/y=2017/m=11/news=the-final-draw-how-it-works-2921565.html) in at the Kremlin, to determine the groups for next summer's men's football World Cup, in Russia. This is quite an exciting event, with lots of pomp and circumstance. (It goes on too long, but the drama of the draw itself is good). It may also  bring some hubris: after the 2010 draw, where England were grouped with the USA, Slovenia, and Algeria, we were overjoyed that such an ostensibly easy group would allow *easy* progress.
![](/img/2017-11-29-a-not-that-great-attempt-at-simulating-the-world-cup-draw/2010-easy.jpg)
Alas, three dire performances later and the England captain was shouting at the England fans through the TV cameras for booing their terrible performance.

If you're not familiar with how it works:

* 31 countries from across the globe have qualified, and have been put into four pots of 8 teams, along with Russia who qualify automatically.

* Russia will be in pot 1, followed by the next seven best ranked teams in the most recent FIFA world rankings

* Pots 2 through 4 are filled the same way, by world rankings. So pot 4 contains the eight lowest ranked nations in the competition (apart from Russia)

![](/img/2017-11-29-a-not-that-great-attempt-at-simulating-the-world-cup-draw/fifa-pots.png)

* Each nation is inside a ball in each pot, and the balls are drawn at randomw

* First pot 1 will be emptied first into groups A to H, drawn randomly, except that Russia will be automatically given pot A (as their matches have already been scheduled)

* Then pots 2 to 4 will be done in turn, also at random

* **But**, you cannot have more than one team from the same Confederation (i.e. continental group of football nations, essentially: Europe, Asia, Africa, South America, North & Central America) in the same group, except for European teams (because there are more) of which there cannot be more than 2.

**So** it is a complicated affair, and I thought it might be interesting to simulate in R to see which combinations of teams are most frequent, given the constraints of the draw. [Some newspapers and other websites have already got similar tools that you can try out yourself.](https://www.theguardian.com/football/2017/nov/16/world-cup-finals-create-your-own-draw-for-russia-2018-interactive)

Sadly, I found this a much more difficult task than expected. This post comes with several caveats that are explained further below as to the flaws in my methodology, and some things to bear in mind. I don't think this is completely useless, I just don't think it fully represents what will happen during the draw on Friday.

### Caveats

* It's not exactly clear to me the exact method for the draw. Whether groups will be filled in order A to H every time, or whether they will draw out a team from a pot, and then a group letter from another.

* Then, what is the protocol for if a team is drawn to a group that it cannot go into, due to the rules: will they return the team to the pot and draw again, or do they place the team drawn into the next available group that works?

* What happens in the event that you get to a point in the draw where the team drawn cannot go into _any_ of the available groups. It would be possible, for instance, for all the European teams from pot 2 to be drawn ahead of the South American teams, and all into the groups containing European pot 1 teams - and you could be left with Colombia and Peru trying to fit into groups that already contain Brazil or Argentina. I realise that FIFA will sort that out, but *how* is the question, and I don't know how to encorporate that into my simulation.

### How I Did It

I tried out a few things, and they didn't really work - I've not done something like this before, and was really lost as to how to approach it. I tried some things with `for` loops, but it didn't work. Then I came across [this reddit post which was great! It worked!](https://www.reddit.com/r/rstats/comments/7dumr7/simulating_fifa_world_cup_draws_how_to_improve/dq3nzis/)

The code is fairly comprehensible, and it works well, and quickly, without any loops or lots of `if else` conditions. In fact, the function there is better than anything I managed to make myself, and I'd recommend it. [Another reddit user has posted the results of their simulation](https://www.reddit.com/r/soccer/comments/7fxslg/oc_fifa_world_cup_draw_probabilities/), but has not published the method, and I couldn't say whether they've used R to do it or not - but their outcomes look accurate and better than mine - so there is a way!